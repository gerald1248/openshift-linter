function mainFunc(){var t=new App;t.init()}var App=function(){this.counter=0,this.init=function(){var t=this;this.storageGetter(),$("#update-button").on("click",function(){t.storageSetter(),t.get()}),$("#create-report-button").on("click",function(){t.storageSetter(),t.post()}),this.clipboard=new Clipboard("#copy-button"),this.clipboard.on("error",function(t){}),$("#modal-action-button").on("click",function(){t.sideload()}),$("#sideload-modal").on("shown.bs.modal",function(){$("#modal-source").focus()})},this.post=function(){var t=this,e={};try{e=JSON.parse($("#data").val())}catch(t){return void $("#report").text("Can't parse JSON data")}var a=$("#namespace-label").val(),n=$("#namespace-pattern").val(),r=$("#name-pattern").val(),o=$("#container-pattern").val(),l=$("#env-pattern").val();a.length>0&&(e.customNamespaceLabel=a),n.length>0&&(e.customNamespacePattern=n),r.length>0&&(e.customNamePattern=r),o.length>0&&(e.customContainerPattern=o),l.length>0&&(e.customEnvPattern=l),$.ajax({url:"/openshift-linter",type:"POST",data:JSON.stringify(e),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){return"object"!=typeof e?void($("#report")[0].innerHTML=e):void($("#report")[0].innerHTML=t.formatReport(e))},error:function(t){$("#report")[0].innerHTML="POST request failed"}})},this.formatReport=function(t){var e="";for(key in t)for(subkey in t[key]){var a=t[key][subkey],n=a.length;if(0!==n){plural=1===n?"":"s",e+="<h3>"+key+": "+subkey+" ("+n+" item"+plural+")</h3>",e+="<table class='table table-striped'>",e+="<thead class='thead-default'><tr><th>Namespace</th><th>Name</th><th>Container</th></tr></thead>";for(var r=0;r<n;r++)e+="<tr><td>"+this.nonBlank(a[r].Namespace)+"</td><td>"+this.nonBlank(a[r].Name)+"</td><td>"+this.nonBlank(a[r].Container)+"</td></tr>";e+="</table>"}}return e},this.nonBlank=function(t){return 0===t.length?"&ndash;":t},this.get=function(){var t=$("#master-input").val(),e=$("#port-input").val(),a=$("#token-input").val(),n=$("#request-input").val(),r=t+":"+e+n;$.ajax({url:r,type:"GET",dataType:"json",contentType:"application/json; charset=utf-8",headers:{Authorization:"Bearer "+a},success:function(t){$("#data").val(JSON.stringify(t)),$("#error")[0].innerHTML=""},error:function(t){var e=t.responseJSON?t.responseJSON.message:t.statusText;$("#error")[0].innerHTML=e}})},this.sideload=function(){var t=$("#modal-source")[0].value;try{var e=JSON.parse(t)}catch(t){return void($("#report")[0].innerHTML=t.message)}e!=={}&&null!==e&&"undefined"!=typeof e||($("#report")[0].innerHTML="No data"),$("#report")[0].innerHTML=this.formatReport(e)},this.storageGetter=function(){"undefined"!=typeof localStorage&&($("#master-input").val(localStorage.getItem("master")),$("#port-input").val(localStorage.getItem("port")),$("#token-input").val(localStorage.getItem("token")),$("#request-input").val(localStorage.getItem("request")),$("#namespace-pattern").val(localStorage.getItem("namespace-pattern")),$("#name-pattern").val(localStorage.getItem("name-pattern")),$("#container-pattern").val(localStorage.getItem("container-pattern")),$("#env-pattern").val(localStorage.getItem("env-pattern")),$("#data").val(localStorage.getItem("data")))},this.storageSetter=function(){"undefined"!=typeof localStorage&&(localStorage.setItem("master",$("#master-input").val()),localStorage.setItem("port",$("#port-input").val()),localStorage.setItem("token",$("#token-input").val()),localStorage.setItem("request",$("#request-input").val()),localStorage.setItem("namespace-pattern",$("#namespace-pattern").val()),localStorage.setItem("name-pattern",$("#name-pattern").val()),localStorage.setItem("container-pattern",$("#container-pattern").val()),localStorage.setItem("env-pattern",$("#env-pattern").val()),localStorage.setItem("data",$("#data").val()))}};window.onload=mainFunc;